#!/bin/bash

# å†…ç½‘ç©¿é€å¯åŠ¨è„šæœ¬ - ä½¿ç”¨ localtunnelï¼ˆä¸éœ€è¦æ³¨å†Œï¼‰
# ç¡®ä¿å¼€å‘æœåŠ¡å™¨åœ¨è¿è¡Œ: pnpm dev

echo "ðŸŒ æ­£åœ¨å¯åŠ¨å†…ç½‘ç©¿é€..."
echo ""

# æ£€æŸ¥ç«¯å£ 3000 æ˜¯å¦åœ¨è¿è¡Œ
if ! lsof -i :3000 | grep LISTEN > /dev/null; then
    echo "âŒ é”™è¯¯: ç«¯å£ 3000 æ²¡æœ‰åœ¨è¿è¡Œ"
    echo "   è¯·å…ˆå¯åŠ¨å¼€å‘æœåŠ¡å™¨: pnpm dev"
    exit 1
fi

echo "âœ… å¼€å‘æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ"
echo ""
echo "ðŸš€ æ­£åœ¨åˆ›å»ºéš§é“..."
echo ""
echo "ðŸ“‹ é‡è¦ä¿¡æ¯ï¼š"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "âš ï¸  ç¬¬ä¸€æ¬¡è®¿é—®æ—¶ä¼šè¦æ±‚è¾“å…¥ Tunnel Password"
echo "ðŸ“ Tunnel Password ä¼šåœ¨ä¸‹æ–¹æ˜¾ç¤º"
echo ""
echo "ðŸ’¡ æç¤ºï¼šå°†å¯†ç å¤åˆ¶ä¸‹æ¥ï¼Œè®¿é—®è€…éœ€è¦åœ¨æµè§ˆå™¨ä¸­è¾“å…¥"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

# ä½¿ç”¨ localtunnel åˆ›å»ºéš§é“ï¼Œè¾“å‡ºåŒ…å«å¯†ç 
lt --port 3000 --print-requests 2>&1 | tee /tmp/localtunnel.log

